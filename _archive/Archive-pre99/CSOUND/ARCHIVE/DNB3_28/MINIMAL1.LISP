(in-package :stella)(defparameter *totaldur* 0);(defobject quick (csound-note)  ((instr :initform "i1") dur amp pitch pan dist pct istr)  (:parameters instr time dur amp pitch pan dist pct istr))(defobject revnote (csound-note)  ((name :initform "i99") mystart dur revtime)  (:parameters name mystart dur revtime))(defun minmain (st len)  (algorithm nil quick (start st length len)    (setf pitch 1)	(setf rhythm (item (rhythms (h weight 10) (h. weight 10) (w weight 10) (32 weight 4)(64 weight 2)(128 weight 3) in random                             )))        (if (> rhythm (rhythm 'h))          (setf istr (item (items 1 2 [1 3] [2 4] in random)))          (setf istr (item (items 1 2 5 6 7 in random)))          )        (if (= istr 1)          (setf dur .27))        (if (= istr 2)          (setf dur .35))        (if (= istr 3)          (setf dur 13.87))        (if (= istr 4)          (setf dur 6.1))        (if (= istr 5)          (setf dur .8))        (if (= istr 6)          (setf dur .8))        (if (= istr 7)          (setf dur .8))	(setf amp (item (items 5 6 7 8 9 in random                          )))	(setf pan (item (items                          (items 10 20 30  in random for 3)                          (items 70 80 90 in random for 3)                          (items 40 50 60 in random for 3)                          )))        (setf dist (between 1 3))        (setf pct .1)    (setf *totaldur* (max (+ time dur) *totaldur*))))(defun mrn (&key (revtime 10.))  (algorithm nil revnote (start 10000 length 1 revtime revtime rhythm 0)	     (setf mystart 0)	     (setf dur (+ revtime *totaldur* 1))	     ))(defun ms (&key (start-time 1.)(my-scorefile "minimal1.sco"))  (let* ((myheader (header                    "f 1 0 16384 1 \"UGLYBDM.AIF\" 0 0 0"                    "f 2 0 16384 1 \"RUINSNR1M.AIF\" 0 0 0"                    "f 3 0 1048576 1 \"Penderhit1M.AIF\" 0 0 0"                    "f 4 0 524288 1 \"Penderhit2M.AIF\" 0 0 0"                    "f 5 0 262144 1 \"THUNHISS4.aif\" 0 0 0"                    "f 6 0 262144 1 \"CAGETOM.AIF\" 0 0 0"                    "f 7 0 262144 1 \"CAGETOMM.AIF\" 0 0 0"                    "f 8 0 16384 9 .5 1 0"		)))    (fheader my-scorefile myheader)    (merge all ()      (minmain 1 60)      (mrn)            )    (open-cmd my-scorefile)	(mix-cmd "all")))