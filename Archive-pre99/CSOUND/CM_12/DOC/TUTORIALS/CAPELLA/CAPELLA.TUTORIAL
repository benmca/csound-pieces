INTRODUCTION
      
This tutorial steps through a small composition project to point out some of the
basic features of Capella.  It assumes that you built Common Music with MIDI 
enabled, and that you have a MIDI device attached to your Mac.  Select a piano
sound on your synthesizer for best effect.

The following special marks are used: 
Ä		marks a tutorial instruction.
ê		marks an explanation or clarification.
<Return>	means press the return key.
<Click>		means select with the mouse.
-<Key>		means press <Key> with the Apple command key depressed.
ÜäÜ		marks a window title.
[ä]		marks an icon.
      
OBJECTS AND BROWSERS
      
Capella provides a Common Music menu and two different types of windows.
Worksheet windows support general activities like editing musical data, 
playing files, etc.  Browser windows are context sensitive views on individual 
musical objects.  One special browser, titled ÜTop-Level ListingÜ, is
particularily important because it shows all the objects you have defined in
the current session.
 Ä   Type -T to activate ÜTop-Level ListingÜ.
     ê   You can also select "Top Level" from the Common Music menu
         to call up ÜTop-Level ListingÜ at any time. 
Note that the Top-Level object already contains two objects -- Tune1 and Algo1.
These objects were created as a result of loading this tutorial.  Tune1 is
a thread (a sequence) of MIDI data.  Algo1 is an algorithm (a program) that
computes MIDI data on the fly.  As mentioned previously, Top-Level is a
system thread containing all the named objects currently defined.
 
LISTENING TO OBJECTS

We start by listening to Tune1.
Ä   Type -M to open a MIDI connection.
     ê   -M toggles between opening and closing the MIDI port connection.
         You must open MIDI before sending data to it.  This only has to be done
         once per session, and only if you write midi data directly to your
         synthesizer.
The open connection is shown in the Lisp Listener Window.  (Your connection
may indicate PRINTER instead of MODEM):
     #<Port: Midi to MODEM>
Ä   Type -T to insure that ÜTop-Level ListingÜ is the active browser.
Ä   <Click> on Tune1 in the main view of ÜTop-Level ListingÜ.
     ê   If both Tune1 and Algo1 are currently selected, clicking on Tune1 will
         deselect Algo1.
Ä   Type -U to send musical output from Tune1 to your synthesizer.
     ê   If you don't hear anything use -~ to debug your MIDI connection.
         This command sends a short burst of notes to your synthesizer.  Keep
         testing the connection with -~ while you debug the problem.  Is your
         midi device connected properly?  Is your amp turned on?  ...?

DUPLICATING MATERIAL
      
Ä   Insure that ÜTop-Level ListingÜ the active browser again by clicking on its
    title bar or typing -T.
Ä   <Click> on Tune1.
Ä   Type -D to duplicate Tune1.  Tune1-Copy is now selected in the listing.
     ê   You can also create objects using Copy Paste (-C, -P),
         or using the New submenu or the [+] icon in any listing browser.
      
RENAMING OBJECTS
      
Ä   With Tune1-Copy still selected, click on [i] (the second icon from the left)
    in ÜTop-Level ListingÜ.  A new browser called ÜTune1-Copy InfoÜ appears, 
     with the name Tune1-Copy already highlighted in the name buffer at the top
     of the window. 
     ê   ÜTune1-Copy InfoÜ is an information browser.  An Information
         browser shows summary information about an object and allows its
         attributes to be edited. 
Ä   Type Tune2 in the name box and press <Return>.  The browser is now
    titled ÜTune2 InfoÜ  and Tune2 is selected in ÜTop-Level ListingÜ.
Ä   <Click> on the small box on the left hand side of the title bar to close
    ÜTune2 InfoÜ . 
      
EDITING MATERIAL
      
Ä   Select Tune2 in ÜTop-Level ListingÜ.
Ä   <Click> on [pencil] (fourth icon from left). The ÜEdit (Top-Level)Ü 
    worksheet is now visible on your screen.
     ê  A parenthesized name in a worksheet title shows the current focus object.
Ä   Mouse on the Objects pop-up menu and select Midi-Note from the contents.
     A table appears at the bottom of the worksheet and the command region at
     the top  of the worksheet is now enabled.
     ê  The Edit worksheet's table is a class specific template for typing slot
         value expressions.  The worksheet automatically adjusts its table to
         reflect the current selection focus.  If one table can't be determined
         for the current selections the current table is removed and Edit waits
         for you to select the appropriate table by hand from the pop-up menu.
         You can click the Lock check box to force the current table to remain
         installed no matter what type of objects are selected in the
         listing browser.
Ä   Select the Transpose command by <clicking> its radio button directly to
    the left of the command name.
Ä   <Click> in the edit buffer for Note, type 12 and the press the OK button.
    All the MIDI data in Tune2 has now been transposed up 12 degrees in the
    standard scale.
Ä   <Click> the radio button for the Set command.
Ä   <Click> in the table buffer for Amplitude, type .4 and then press OK. 
     All the MIDI data in Tune2 now has an amplitude of 0.4 (1.0 = 127).
Ä   Type -T and then <Double-Click> on Tune2 in ÜTop-Level ListingÜ 
    to confirm that its MIDI data is now different than the data in Tune1.
      
SCHEDULING OBJECTS RELATIVE TO ONE ANOTHER
      
Now we will listen to Tune1 and Tune2 in canon.
Ä   Type -T to make ÜTop-Level ListingÜ  the active browser.
Ä   Select Tune1 AND Tune2 by selecting Tune1 and then dragging the mouse
    down to Tune2.
     ê   -<Click> performs disjoint selection and deselection. 
         SHIFT-<Click> performs contiguous selection/deselection.
Ä   <Click> on [layout] (4th icon from right) to bring up an ÜOutputÜ
     worksheet.
     ê   The ÜOutputÜ worksheet allows you to design different "layouts" of 
         musical material.  Each layout represents horizontal (sequencing)
         and vertical (mixing) relationships between objects that produce
         sound.
Ä   Select Midi from the pop-up Streams menu in the upper field of ÜOutputÜ.
Ä   <Click> in the box for Tune2 and change the text to "Tune2 start 5"
      and then press <Return> or <Enter> to exit the box.
     ê   The box automatically resizes itself after you type <Return>.
Ä   <Click> on the Output button or type -U to start output processing.
     You now hear Tune1 starting at time 0 and Tune2 starting at time 5.
      
CONDITIONAL EDITING
      
Next we will edit some of the material in Tune2.
Ä   Type -T to activate ÜTop-Level ListingÜ.
Ä   <Click> on the "Select" text in ÜTop-Level ListingÜ to clear everything.
     ê  <Clicking> "Select" toggles between selecting and clearing everything.
         -A selects everything, or use Select All and Clear in the Edit menu.
Ä   <Double-Click> on Tune2 in ÜTop-Level ListingÜ to open a listing
    browser on Tune2. ÜTune2 ListingÜ is now the active browser.
     ê   The [Magnifying Glass] icon also opens up a listing browser.
Ä   <Double-Click> the left or right outer parenthesis of the following
    expression and type -C: 

     (member note '(g5 af5 g6 af6 g7 af7))

Ä   <Click>inside the type-in field just below "Select" in ÜTune2 ListingÜ  and
    type -V to paste the expression into the buffer. 
Ä   Press <Return> after pasting.  All midi notes whose note values are G or A
    flat within three octaves above middle C are now highlighted (selected).  It
    is impossible to see all these objects but the browser tells you that 58 of
    the 180 objects are currently selected.
Ä   <Click> on [Pencil] or select the old ÜEdit (Top-Level)Ü worksheet.  The
    edit worksheet is now titled ÜEdit (Tune2)Ü because Tune2 is now the
    current focus object.
Ä   Select the Scale command in the upper portion of  ÜEdit (Tune2)Ü.
Ä   <Click> in the edit buffer for Amplitude and enter 1.25 .
Ä   <Click> in the edit buffer for Duration and enter 2 .
Ä   <Click> OK.  The selected MIDI data in  ÜTune2 ListingÜ now has 1.25
    times more amplitude and 2 times more duration.

LISTEN AGAIN
      
Now use ÜOutputÜ to listen to both Tune1 and Tune2 in canon again:
Ä   <Click> on ÜOutputÜ or select it from the Windows menu.
Ä   Type -U to listen to the material.

STORING LAYOUTS
       
You can name, store and later retrieve layouts for use.
Ä   Type Canon1 (or whatever name you want to use) in the text box
      above the layout field. 
Ä   <Click> the Store button.

The layout is now accessible via the pop-up menu to the left.  This layout is
preserved even if the ÜOutputÜ window has been closed.

MAKING A THIRD VOICE
       
Next we build a bass line by duplicating Tune1, renaming the new object Tune3
and  transposing its MIDI data down 2 octaves:
Ä   Select Tune1 in  ÜTop-level ListingÜ.
Ä   Type -D.
Ä   Type -I.
Ä   Type Tune3 and press <Return>.
Ä   Close  ÜTune3 InfoÜ.
Ä   Type -T.
Ä   <Click> the [Pencil] icon.
Ä   Select  Midi-Note from the Object menu in ÜEdit (Top-level)Ü.
Ä   <Click> on the radio button for Transpose.
Ä   <Click> in the edit buffer for Note and type -24 .
Ä   <Click> OK.
Ä   <Click> on the radio button for Set.
Ä   <Click> in the edit buffer for Amplitude and type .5 .
Ä   <Click> OK.

Tune3 is now a slightly louder bass line two octaves below Tune1.
      
USING QUERY

Now we want to emphasize just the lowest tone in Tune3.  But what is the
lowest tone and which midi-notes contain it?
Ä   Select Tune3 in ÜTop-level ListingÜ.
Ä   <Click> the [?] icon.  A new worksheet called ÜQuery (Top-Level)Ü
    appears.
Ä   Select Lowest from the Find menu at the top of the window.
Ä   Type Note in the buffer to the right of the menu and press <Return>.
    An answer appears in the output pane at the bottom of the window telling
    you that C2 is the lowest note.
     ê   Note is an example of a simple mapping expression.  See the end of
         the Selection help in Capella's help menu for more information.
 
EMPHASIZING THE LOWEST PITCH
      
Ä   Type -T and <Double-Click> Tune3 to bring up ÜTune3 ListingÜ.
Ä   Copy Paste the following expression to the selection buffer
    in ÜTune3 ListingÜ:
 
     (equal note c2)

Ä   Press <Return>.  All midi data with a Note value of C2 is now selected.
Ä   Select the ÜEdit ...Ü worksheet.
Ä   <Click> on the radio button for Scale.
Ä   <Click> in the edit buffer for Amplitude and type 1.25 .
Ä   <Click> OK.

LISTENING IN PARALLEL

Now listen to Tune1, Tune2 and Tune3 with local start time offsets of 0, 5 and
10, respectively:

Ä   Select the ÜOutputÜ worksheet or use the [Layout] icon in 
     ÜTop-Level ListingÜ.
Ä   Select  Canon1 from the Layout pop-up menu if it is not already visible.
Ä   <Click> in the box "Tune2 start 5" and type  -C to copy its contents.
Ä   Type -V to create a new box underneath it.
     ê   -N creates a new, empty box in the layout field ready for input.
     ê   Use the Tab key or Control-f (forward) and Control-b (backward)
         to move from box to box.
Ä   <Click> in the newly created box and change "Tune2 start 5" to
     "Tune3 start 10".
Ä   Press <Return>.
Ä   <Click> on the Output button or type -U to listen to the output mix of
    the three objects.

LISTENING IN SEQUENCE
      
Algo1 is an algorithm that creates chords using pseudo-random selection.  We
first listen to Algo1 several times understand its behavior:
Ä   Select the ÜOutputÜ worksheet. 
Ä   Select New from the Layouts pop-up menu in ÜOutputÜ.
Ä   Type -T to select  ÜTop-Level ListingÜ.
Ä   Select only Algo1 in ÜTop-Level ListingÜ and <Click> the [Layout] icon.
Ä   Append " start 1 repeat 2 pause 3" to the "Algo1" text string, then press 
    <Return>to exit the box.
Ä   <Click> the  Output button.  Algo1 will start playing after 1 second.  It
    will play two times with a three second pause between each iteration.  
Ä   Look at Algo1's algorithm by selecting ÜAlgo1 CodeÜ from the Windows
    menu. A Code browser is a  structured editor for developing musical
    algorithms. Explaining it is beyond the scope of this tutorial.
     ê   See the files cm:doc:item-streams.rtf and cm:doc:dictionary.rtf
         to learn about pattern generation in Common Music.

LISTENING TO THE COMPOSITION
      
Ä   Select the ÜOutputÜ worksheet. 
Ä   Drag the lower right corner of ÜOutputÜ to make it slightly longer. 
Ä   Select Canon1 from the Layouts pop-up menu in ÜOutputÜ.
Ä   <Click> in the box "Tune3 start 10" and type -C to copy its contents.
Ä   Type -V to create a new box underneath it.
Ä   Click in the new box and change "Tune3 start 10" to "Algo1 start 15".
Ä   Press <Return>.
Ä   <Click> on the Output button or type -U to listen to the output mix of
    all the objects.

SAVING YOUR WORK

Ä   Select ÜTop-Level ListingÜ.
Ä   Select Archive from the Common Music menu, or <Click> the
    [Download] icon (furthest right).  Specify the directory and filename and
    <Click> OK. It may take a bit of time to save the objects, so be patient.

LEARNING MORE ABOUT COMMON MUSIC

Common Music's help submenu contains overviews of Capella's functionality
as well as documentation about commands in Stella (an editor that runs in all
ports of Common Music).  See the cm:stella:tutorial directory for a tutorial
about Stella, and cm:doc for the general system documentation.

 -Rick Taube 17.11.95

